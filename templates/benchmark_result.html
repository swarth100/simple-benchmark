<!DOCTYPE html>
<html>
<head>
    <title>Benchmark Results</title>
    <!-- Add any required CSS or JS libraries here -->
    <link rel="stylesheet" href="/static/styles.css">
</head>
<body>
<h1>Benchmark Results</h1>

<div class="flex-container">
    {% if "error" in result %}
    <div class="error flex-element">
        <h2>Error</h2>
        <pre>{{ result.error }}</pre>
    </div>
    {% endif %}
</div>

<div class="flex-container">
    {% if "output" in result %}
    <div class="success flex-element">
        <h2>Benchmark Result</h2>
        <pre>{{ result.output }}</pre>
    </div>
    {% endif %}

    {% if "reference" in result %}
    <div class="primary flex-element">
        <h2>Reference Implementation</h2>
        <pre>{{ result.reference }}</pre>
    </div>
    {% endif %}
</div>

<div class="flex-container">
    {% if "chartData" in result %}
    <div class="chart flex-element">
        <h2>Performance Chart</h2>
        <svg width="600" height="370" , style="border: 1px solid dimgray">
            <!-- Plot points -->
            {% for point in result.chartData %}
            <circle cx="{{ point.x + 100 }}" cy="{{ 300 - point.y }}" r="3" fill="blue"/>
            {% endfor %}
            <!-- X-axis label -->
            <text x="350" y="350" class="axis-label" text-anchor="middle">Problem Size</text>
            <!-- Y-axis label -->
            <text x="20" y="150" class="axis-label" transform="rotate(-90 20,150)" text-anchor="middle">Time Taken
                (seconds)
            </text>
            <!-- X-axis ticks -->
            {% for tick_pos, tick_label in result.xTicks %}
            <text x="{{ tick_pos + 100 }}" y="320" class="tick">{{ tick_label }}</text>
            {% endfor %}
            <!-- Y-axis ticks -->
            {% for tick_pos, tick_label in result.yTicks %}
            <text x="40" y="{{ 305 - tick_pos }}" class="tick">{{ tick_label }}</text>
            {% endfor %}
            <!-- Horizontal grid lines (based on Y-axis ticks) -->
            {% for tick_pos, _ in result.yTicks %}
            <line x1="100" y1="{{ 300 - tick_pos }}" x2="600" y2="{{ 300 - tick_pos }}" stroke="#ddd" stroke-width="1"/>
            {% endfor %}
            <!-- Vertical grid lines (based on X-axis ticks) -->
            {% for tick_pos, _ in result.xTicks %}
            <line x1="{{ tick_pos + 110 }}" y1="0" x2="{{ tick_pos + 110 }}" y2="300" stroke="#ddd" stroke-width="1"/>
            {% endfor %}
        </svg>
    </div>
    {% endif %}

    {% if "topResults" in result %}
    <div class="top-results flex-element">
        <h2>Top Benchmark Results</h2>

        {% if current_user is not defined or current_user == '' %}
        <div class="error">
            <h4>You must set your username to submit to the leaderboards</h4>
        </div>
        {% endif %}

        {% from "leaderboard.html" import render_leaderboard as leaderboard_macro %}
        {{ leaderboard_macro(leaderboard=result.topResults, current_user=current_user) }}
    </div>
    {% endif %}
</div>

<div style="height: 20px"></div>
<a href="/">Run another benchmark</a>
</body>
</html>
